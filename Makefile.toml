[env]
HARDWARE_TARGET = "armv7r-none-eabihf"
DEVICE_TOOLCHAIN_PREFIX = "arm-none-eabi-"
OUT_APP_DEBUG = "./target/${HARDWARE_TARGET}/debug/demo-app"
# OUT_LIB_DEBUG = "./target/${HARDWARE_TARGET}/debug/libdemo_app.a"
OUT_APP_RELEASE = "./target/${HARDWARE_TARGET}/release/demo-app"
# OUT_LIB_RELEASE = "./target/${HARDWARE_TARGET}/debug/libdemo_app.a"

[config]
default_to_workspace = false

[tasks.build]
command = "cargo"
args = [
    "build",
    "--target", "${HARDWARE_TARGET}",
]

[tasks.build-release]
command = "cargo"
args = [
    "build",
    "--target", "${HARDWARE_TARGET}",
    "--release",
]

[tasks.test]
command = "cargo"
args = [
    "test",
]

[tasks.check]
command = "cargo"
args = [
    "check",
    "--target", "${HARDWARE_TARGET}",
]

[tasks.format]
command = "cargo"
args = [
    "fmt",
]

[tasks.clippy]
command = "cargo"
args = [
    "clippy",
    "--target", "${HARDWARE_TARGET}",
]
dependencies = ["install-clippy"]

[tasks.size]
command = "${DEVICE_TOOLCHAIN_PREFIX}size"
args = [
    "-Ax",
    "${OUT_APP_DEBUG}",
    "${@}",
]

[tasks.size-release]
command = "${DEVICE_TOOLCHAIN_PREFIX}size"
args = [
    "-Ax",
    "${OUT_APP_RELEASE}",
    "${@}",
]
